create database baitaplon_sqlserver use baitaplon_sqlserver ----- TẠO BẢNG ----- -- Tạo bảng tblTrường create table tblTruong (iMaTruong int primary key,
    sTenTruong nvarchar(30) unique,
    sDiaChi nvarchar(50),
    sSoDienThoai nvarchar(10) unique);

-- Tạo bảng tblKhoa create table tblKhoa (iMaKhoa int primary key,
    sTenKhoa nvarchar(30),
    sDiaChi nvarchar(50),
    sSoDienThoai nvarchar(10),
    iMaTruong int,
    foreign key (iMaTruong) references tblTruong(iMaTruong));

-- Tạo bảng tblPhongThi create table tblPhongThi (iMaPhong int primary key,
    sTenPhong nvarchar(50),
    sDiaDiem nvarchar(50));

-- Tạo bảng tblThiSinh create table tblThiSinh (iMaTS int primary key,
    sTenTS nvarchar(20),
    dNgaySinh datetime,
    sGioiTinh nvarchar(10),
    sEmail nvarchar(50) unique,
    sSoDienThoai nvarchar(10) unique,
    sDiaChi nvarchar(50),
    iMaKhoa int,
    iMaPhong int,
    foreign key (iMaKhoa) references tblKhoa(iMaKhoa),
    foreign key (iMaPhong) references tblPhongThi(iMaPhong));

-- Tạo bảng tblkythi create table tblKyThi (iMaKyThi int primary key,
    dThoiGianBatDau datetime,
    dThoiGianKetThuc datetime,
    sTenKyThi nvarchar(20),
) -- Tạo bảng tblKetQuaThi create table tblKetQuaThi (iMaTS int,
    iMaKyThi int,
    fDiemNghe float,
    fDiemDoc float,
    fDiemViet float,
    primary key (iMaTS, iMaKyThi),
    foreign key (iMaTS) references tblThiSinh(iMaTS),
    foreign key (iMaKyThi) references tblKyThi(iMaKyThi),
);

----- THÊM RÀNG BUỘC ----- -- Kiểm tra thí sinh đủ 18 tuổi ALTER TABLE tblThiSinh ADD CONSTRAINT CHK_TuoiSinhVien CHECK (DATEDIFF(DAY, dNgaySinh, GETDATE()) >=6570);

-- Thời gian bắt đầu nhỏ hơn thời gian kết thúc ALTER TABLE tblKyThi ADD CONSTRAINT CHK_ThoiGianKyThi CHECK (dThoiGianBatDau < dThoiGianKetThuc);

-- Các đầu điểm nằm trong đoạn [0,
10] ALTER TABLE tblKetQuaThi ADD CONSTRAINT CHK_DiemNghe CHECK (fDiemNghe >=0 AND fDiemNghe <=10),
CONSTRAINT CHK_DiemDoc CHECK (fDiemDoc >=0 AND fDiemNghe <=10),
CONST RAINT CHK_DiemViet CHECK (fDiemViet >=0 AND fDiemNghe <=10) /////

----- THÊM BẢN GHI ---- -- Thêm bản ghi cho tblTruong select * from tblTruong INSERT INTO tblTruong VALUES (1, N'Cao Đẳng Bách Khoa', N'Hà Nội', N'0929813521'),
(2, N'Mở Hà Nội', N'Hà Nội', N'0987654321'),
(3, N'Bách Khoa HCM', N'TP Hồ Chí Minh', N'0956787525'),
(4, N'PTIT', N'Hà Nội', N'0333666999'),
(5, N'Y Thái Nguyên', N'Thái Nguyên', N'0995858555');

-- Thêm cho tblKhoa select * from tblKhoa INSERT INTO tblKhoa VALUES (1, N'CNTT', N'102 Lê Thanh Nghị', N'0222333444', 1),
(2, N'Chế Tạo Máy', N'102 Lê Thanh Nghị', N'0444333222', 1),
(3, N'Ngôn Ngữ Anh', N'102 Lê Thanh Nghị', N'0999888999', 1),
(4, N'Ngôn Ngữ Anh', N'193 Vĩnh Hưng', N'0325112306', 2),
(5, N'Ngôn Ngữ Trung', N'96 Định Công', N'0310252005', 2),
(6, N'Tự Động Hóa', N'01 Quận 1', N'0395959542', 3),
(7, N'Thiết Kế Đồ Họa', N'01 Quận 1', N'0336551522', 3),
(8, N'CNTT', N'96 Nguyễn Trãi', N'0323030616', 4),
(9, N'Điện Tử Viễn Thông', N'96 Nguyễn Trãi', N'0326161616', 4),
(10, N'Y Đa Khoa', N'55 Thái Nguyên', N'0295215693', 5);

-- Thêm bản ghi cho tblKyThi select * from tblKyThi INSERT INTO tblKyThi VALUES (2013, '2013-01-01 08:00:00', '2013-01-01 10:59:59'),
(2015, '2015-01-01 08:00:00', '2015-01-01 10:59:59'),
(2017, '2017-05-23 13:00:00', '2017-05-23 15:59:59'),
(2019, '2019-12-31 13:00:00', '2019-12-31 15:59:59'),
(2021, '2021-07-07 08:00:00', '2021-07-07 10:59:59'),
(2023, '2023-06-01 13:00:00', '2023-06-01 15:59:59') -- Thêm bản ghi cho tblPhongThi select * from tblPhongThi INSERT INTO tblPhongThi VALUES (1, N'Phòng 101', N'Tầng 1, 96 Định Công'),
(2, N'Phòng 102', N'Tầng 1, 193 Vĩnh Hưng'),
(3, N'Phòng 201', N'Tầng 2, 11 Phan Trọng Tuệ'),
(4, N'Phòng 202', N'Tầng 2, 99 Trương Định'),
(5, N'Phòng 301', N'Tầng 3, 99 Trương Định');

-- Thêm bản ghi cho bảng tblThiSinh select * from tblThiSinh INSERT INTO tblThiSinh VALUES (1, N'Nguyễn Văn A', '2000-01-15', N'Nam', 'nguyenvana@gmail.com', '0999999991', N'Hà Nội', 9, 1),
(2, N'Trần Thị B', '2002-05-20', N'Nữ', 'tranthib@gmail.com', '0999999992', N'Hà Nội', 9, 1),
(3, N'Lê Văn C', '1999-11-10', N'Nam', 'levanc@gmail.com', '0999999993', N'TP Hồ Chí Minh', 8, 3),
(4, N'Phạm Thị D', '2003-08-25', N'Nữ', 'phamthid@gmail.com', '0999999994', N'TP Hồ Chí Minh', 7, 4),
(5, N'Huỳnh Văn E', '2001-03-18', N'Nam', 'huynhve@gmail.com', '0987123456', N'Hà Nội', 5, 2),
(6, N'Nguyễn Thị F', '2004-12-05', N'Nữ', 'nguyenthif@gmail.com', '0987123432', N'Thái Nguyên', 1, 1),
(7, N'Trần Văn G', '2000-02-08', N'Nam', 'tranvang@gmail.com', '0945578901', N'Hà Nội', 2, 5),
(8, N'Lê Thị H', '2003-07-12', N'Nữ', 'lethih@gmail.com', '0909955576', N'TP Hồ Chí Minh', 6, 3),
(9, N'Phan Văn I', '2002-09-30', N'Nam', 'phanvani@gmail.com', '0488776655', N'TP Hồ Chí Minh', 8, 1),
(10, N'Trịnh Thị K', '2001-04-22', N'Nữ', 'trinhthik@gmail.com', '0915545678', N'Hà Nội', 3, 1),
(11, N'Vũ Thị L', '2003-11-02', N'Nữ', 'vuthil@gmail.com', '0977744477', N'Thái Nguyên', 3, 5),
(12, N'Đặng Văn M', '2000-06-28', N'Nam', 'dangvanm@gmail.com', '0966656666', N'Hà Nội', 7, 2),
(13, N'Hoàng Thị N', '2002-01-09', N'Nữ', 'hoangthin@gmail.com', '0445999999', N'TP Hồ Chí Minh', 8, 2),
(14, N'Võ Văn O', '1999-05-17', N'Nam', 'vovano@gmail.com', '0944445544', N'TP Hồ Chí Minh', 2, 4),
(15, N'Đinh Thị P', '2001-09-11', N'Nữ', 'dinhthip@gmail.com', '0933344333', N'Hà Nội', 4, 1),
(16, N'Nguyễn Văn Q', '2000-10-14', N'Nam', 'nguyenvanq@gmail.com', '0922452222', N'Thái Nguyên', 6, 5),
(17, N'Trần Thị R', '2003-03-27', N'Nữ', 'tranthir@gmail.com', '0911116511', N'Hà Nội', 8, 5),
(18, N'Lê Văn S', '2002-04-19', N'Nam', 'levans@gmail.com', '0955655555', N'TP Hồ Chí Minh', 9, 3),
(19, N'Phạm Thị T', '2001-07-23', N'Nữ', 'phamthit@gmail.com', '0947744444', N'TP Hồ Chí Minh', 2, 4),
(20, N'Huỳnh Văn U', '2000-12-30', N'Nam', 'huynhvu@gmail.com', '0966600006', N'Hà Nội', 2, 5),
(21, N'Nguyễn Thị V', '2003-08-07', N'Nữ', 'nguyenthiv@gmail.com', '0933448333', N'Thái Nguyên', 3, 1),
(22, N'Trần Văn X', '2002-02-04', N'Nam', 'tranvanx@gmail.com', '0922322222', N'Hà Nội', 2, 2),
(23, N'Lê Thị Y', '2000-05-15', N'Nữ', 'lethiy@gmail.com', '0911561111', N'TP Hồ Chí Minh', 7, 3),
(24, N'Phan Văn Z', '2001-10-20', N'Nam', 'phanvanz@gmail.com', '0955605555', N'TP Hồ Chí Minh', 5, 2),
(25, N'Trịnh Thị Á', '2002-09-18', N'Nữ', 'trinhthia@gmail.com', '0944644444', N'Hà Nội', 5, 5),
(26, N'Vũ Thị B', '2000-03-14', N'Nữ', 'vuthib@gmail.com', '0966663666', N'Thái Nguyên', 1, 2),
(27, N'Đặng Văn C', '2001-12-19', N'Nam', 'dangvanc@gmail.com', '0928532222', N'Hà Nội', 2, 2),
(28, N'Hoàng Thị D', '2003-06-25', N'Nữ', 'hoangthid@gmail.com', '0911118491', N'TP Hồ Chí Minh', 3, 1),
(29, N'Võ Văn E', '2002-08-30', N'Nam', 'vovane@gmail.com', '0955858555', N'TP Hồ Chí Minh', 7, 4),
(30, N'Đinh Thị F', '2000-04-09', N'Nữ', 'dinhthif@gmail.com', '0942934444', N'Hà Nội', 6, 5);

-- Thêm bản ghi cho tblKetQuaThi select * from tblKetQuaThi insert into tblKetQuaThi values (1, 2013, 4, 6, 8),
(2, 2013, 5, 8, 8),
(3, 2015, 5, 8, 9),
(6, 2019, 7, 8, 9),
(12, 2017, 8, 8, 8),
(13, 2017, 7, 7, 7),
(23, 2013, 6, 8, 7),
(22, 2015, 7, 8, 6),
(7, 2015, 6, 8, 6),
(14, 2023, 7, 6, 9),
(2, 2015, 7, 7, 9),
(2, 2017, 7, 8, 7),
(11, 2023, 7, 10, 7),
(4, 2021, 5, 8, 9),
(30, 2021, 7, 5, 5),
(25, 2023, 7, 5, 9),
(24, 2019, 10, 8, 9),
(21, 2019, 7, 8, 10),
(26, 2015, 7, 10, 9),
(27, 2013, 5, 8, 9),
(10, 2017, 7, 5, 9),
(28, 2023, 7, 6, 9),
(15, 2021, 7, 4, 9),
(20, 2019, 7, 8, 8),
(20, 2021, 7, 8, 8),
(29, 2013, 8, 8, 9),
(16, 2017, 7, 5, 9),
(9, 2021, 7, 8, 4),
(18, 2021, 7, 2, 9),
(19, 2023, 10, 10, 10),
(17, 2013, 7, 10, 9),
(8, 2015, 10, 8, 9)